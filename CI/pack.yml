# [Template] Download DLL artifacts and npm pack

parameters:
  ArtifactName: ''

steps:
- task: DownloadBuildArtifacts@0
  displayName: Download built DLLs
  inputs:
    artifactName: ${{ parameters.ArtifactName }}
    downloadPath: $(Build.SourcesDirectory)

- script: |
    npm pack $(Build.SourcesDirectory)/${{ parameters.ArtifactName }}
  displayName: Package for UPM

- task: CopyFiles@2
  displayName: Copy UPM packages to artifacts staging directory
  inputs:
    contents: $(Build.SourcesDirectory)/*.tgz
    targetFolder: $(Build.ArtifactStagingDirectory)

- task: PublishBuildArtifacts@1
  displayName: Publish UPM artifacts
  inputs:
    artifactName: UPMTarball